@page

@{
}
@section Scripts {

    <script src="~/js/AddPage.js"></script>
}
@section styles {
    <link rel="Stylesheet" href="~/css/AddEdit.css" />
}
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Student</title>
    @* <link rel="stylesheet" href="~/css/AddEdit.css" /> *@
    @* <script src="~/js/AddPage.js"></script> *@

</head>
<body>
    <div class="contains">
        <h1 id="Add">Edit Student</h1>


        <form id="userForm">
            
                <div class="first">
                    <div class="first1">
                        <div class="flex-container">
                            <div class="line-1"><label for="firstName" id="lb" placeholder="Please enter First Name">First Name<span class="required"> *</span></label></div>
                        <div class="line-2"><input maxlength="15" type="text" id="firstName" name="firstName" placeholder="Please enter First Name" onkeypress="return /[a-z ]/i.test(event.key)" /></div>
                        </div>
                        <div id="first-name-err" class="errorf"></div>
                    </div>
                </div>


                <div class="first">
                    <div class="flex-container">
                        <div class="line-1"><label for="lastName" id="lb">Last Name<span class="required"> *</span></label></div>
                        <div class="line-3">
                        <input maxlength="18" id="lastName" name="lastName" placeholder="Please enter Last Name" onkeypress="return /[a-z ]/i.test(event.key)" />
                        </div>
                    </div>
                    <div id="last-name-err" class="errorl"></div>
                </div>

            <div class="first">
                <div class="flex-container">
                    <div class="line-1"><label for="gender" id="lb">Gender<span class="required"> *</span></label></div>

                    <select id="gender" style="height : 30px" name="gender" required>
                        <option value="" disabled selected style="color: lightgray">Please select Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                    </select><br>
                </div>
                <div id="gender-err" class="errorg"></div>
            </div>

            <div class="first">
                <div class="flex-container">
                    <div class="D-A">
                        <label for="dob" id="lb">Date of Birth<span class="required"> *</span></label>

                        <input class="D-A1" type="date" id="dob" name="dob" />

                    </div>


                    <div class="D-A">
                        <label for="age" class="D-A2A" id="age1">Age<span class="required"> *</span></label>
                        <input class="D-A2" type="number" id="age" name="age"
                               oninput="this.value = this.value.replace(/[^0-9]/g, '');" />
                    </div>
                    <label for="years" id="years">years</label>
                </div>
                <div class="flex-container">
                    <div id="dob-err" class="errord"></div>
                    <div id="age-err" class="errora"></div>
                </div>
            </div>


            <div class="first">
                <div class="flex-container">
                    <div class="line-1"> <label for="sclass" id="lb">Class</label></div>
                    <div class="D-A1C"><input type="text" id="sclass" name="sclass" placeholder="Please enter Class" /></div>
                </div>
            </div>

            <div class="first">
                <div class="flex-container">
                    <div class="line-1">
                        <label for="address" id="lb">Address:</label>
                    </div>
                    <div class="line-4">
                        <textarea type="text" id="address" name="address" rows="3"
                                  style="resize: none;" placeholder="Please enter address"></textarea>
                    </div>
                </div>
            </div>




            <div class="flex-container">
                @* <button type="button" id="delete1" style="color : red; background-color : lightgray; " onclick="delete1()">Delete</button> *@
                <button type="button" style="color : red; background-color : lightgray;" onclick="delete1()" class="delete1">Delete</button>

                <button type="button" id="save1" style="color : black; background-color : steelblue" onclick="Save1()">Save</button>

                <button onclick="cancelUser()" type="button" style="color : black; background-color : lightgray" class="cancel1">Cancel</button>
            </div>

        </form>
    </div>
</body>
</html>
    <script>
        // document.getElementById("dob").valueAsDate = new Date();
        // function calculateAge() {
        //     var dob = new Date(document.getElementById("dob").value);
        //     var currentDate = new Date();

        //     var age = currentDate.getFullYear - dob.getFullYear();
        //     if (currentDate.getMonth() < dob.getMonth() || (currentDate.getMonth() === dob.getMonth() && currentDate.getDate() < dob.getDate())) {
        //         age--;
        //     }
        //     document.getElementById("age").value = age;
        // }
        // function calculateDOB() {
        //     var age = document.getElementById("age").value;
        //     var currentDate = new Date();

        //     var dobYear = currentDate.getFullYear() - age;


        //     var dob = new Date(dobYear, 0, 1);


        //     document.getElementById("dob").valueAsDate = dob;
        // }
        // function getUrlParameter(name) {
        //     name = name.replace(/[\[\]]/g, "\\$&");
        //     var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        //         results = regex.exec(window.location.href);
        //     if (!results) return null;
        //     if (!results[2]) return '';
        //     return decodeURIComponent(results[2].replace(/\+/g, " "));
        // }

        // // Function to populate form with user data
        // function populateFormForEdit(index) {
        //     var firstName = getUrlParameter('firstName');
        //     var lastName = getUrlParameter('lastName');
        //     var gender = getUrlParameter('gender');
        //     var dob = getUrlParameter('dob');
        //     var age = getUrlParameter('age');
        //     var sclass = getUrlParameter('sclass');
        //     var address = getUrlParameter('address');

        //     document.getElementById("firstName").value = firstName;
        //     document.getElementById("lastName").value = lastName;
        //     document.getElementById("gender").value = gender;
        //     document.getElementById("dob").value = dob;
        //     document.getElementById("age").value = age;
        //     document.getElementById("sclass").value = sclass;
        //     document.getElementById("address").value = address;

        // }

        // // Check if 'edit' parameter is present in the URL
        // var editParameter = getUrlParameter('edit');
        // if (editParameter === 'true') {
        //     // If editing, populate the form with existing data
        //     var editIndex = getUrlParameter('index');
        //     populateFormForEdit(editIndex);
        // }

        // function Save1() {
        //     var firstName = document.getElementById("firstName").value.replace(/\s/g, '');
        //     var lastName = document.getElementById("lastName").value;
        //     var gender = document.getElementById("gender").value;
        //     var dob = document.getElementById("dob").value;
        //     var age = document.getElementById("age").value;
        //     var sclass = document.getElementById("sclass").value;
        //     var address = document.getElementById("address").value;
            

        //     if (firstName && lastName) {
        //         var existingUsers = JSON.parse(localStorage.getItem('users')) || [];
        //         var editIndex = getUrlParameter('index');

        //         if (editParameter === 'true' && editIndex !== null) {
        //             // If editing, update existing user data
        //             existingUsers[editIndex].firstName = firstName;
        //             existingUsers[editIndex].lastName = lastName;
        //             existingUsers[editIndex].gender = gender;
        //             existingUsers[editIndex].dob = dob;
        //             existingUsers[editIndex].age = age;
        //             existingUsers[editIndex].sclass = sclass;
        //             existingUsers[editIndex].address = address;

        //         } else {
        //             // If adding, create a new user
        //             var user = {
        //                 firstName: firstName,
        //                 lastName: lastName,
        //                 gender: gender,
        //                 dob: dob,
        //                 age: age,
        //                 sclass: sclass,
        //                 address: address
        //             };
        //             existingUsers.push(user);
        //         }

        //         localStorage.setItem('users', JSON.stringify(existingUsers));

        //         document.getElementById("firstName").value = '';
        //         document.getElementById("lastName").value = '';
        //         document.getElementById("gender").value = gender;
        //         document.getElementById("dob").value = dob;
        //         document.getElementById("age").value = age;
        //         document.getElementById("sclass").value = sclass;
        //         document.getElementById("address").value = address;

        //         alert('User saved successfully!');

        //         // Navigate to datadisplay.html after saving
        //         window.location.href = 'Index';
        //     }
        // }
        // function addOrUpdateUser() {
        //     var firstName = document.getElementById("firstName").value;
        //     var lastName = document.getElementById("lastName").value;
        //     var gender = document.getElementById("gender").value;
        //     var dob = document.getElementById("dob").value;
        //     var age = document.getElementById("age").value;
        //     var sclass = document.getElementById("sclass").value;
        //     var address = document.getElementById("address").value;


        //     if (firstName && lastName) {
        //         var existingUsers = JSON.parse(localStorage.getItem('users')) || [];
        //         var editIndex = getUrlParameter('index');

        //         if (editParameter === 'true' && editIndex !== null) {
        //             // If editing, update existing user data
        //             existingUsers[editIndex].firstName = firstName;
        //             existingUsers[editIndex].lastName = lastName;
        //             existingUsers[editIndex].gender = gender;
        //             existingUsers[editIndex].dob = dob;
        //             existingUsers[editIndex].age = age;
        //             existingUsers[editIndex].sclass = sclass;
        //             existingUsers[editIndex].address = address;

        //         } else {
        //             // If adding, create a new user
        //             var user = {
        //                 firstName: firstName,
        //                 lastName: lastName,
        //                 gender: gender,
        //                 dob: dob,
        //                 age: age,
        //                 sclass: sclass,
        //                 address: address
        //             };
        //             existingUsers.push(user);
        //         }

        //         localStorage.setItem('users', JSON.stringify(existingUsers));

        //         document.getElementById("firstName").value = '';
        //         document.getElementById("lastName").value = '';
        //         document.getElementById("gender").value = gender;
        //         document.getElementById("dob").value = dob;
        //         document.getElementById("age").value = age;
        //         document.getElementById("sclass").value = sclass;
        //         document.getElementById("address").value = address;

        //         alert('User saved successfully!');

        //         // Navigate to datadisplay.html after saving
        //         window.location.href = 'Index';
        //     }
        // }

        // function editUser(index) {
        //     var userToEdit = users[index];
        //     var editUrl = 'userform.html?edit=true&index=' + index +
        //         '&firstName=' + encodeURIComponent(userToEdit.firstName) +
        //         '&lastName=' + encodeURIComponent(userToEdit.lastName) +
        //         '&gender=' + encodeURIComponent(userToEdit.gender) +
        //         '&dob=' + encodeURIComponent(userToEdit.dob) +
        //         '&age=' + encodeURIComponent(userToEdit.age) +
        //         '&sclass=' + encodeURIComponent(userToEdit.sclass) +
        //         '&address=' + encodeURIComponent(userToEdit.address);
        //     // Redirect to userform.html with edit parameters
        //     window.location.href = editUrl;
        //     alert('Edit operation performed.');
        // }
        // function cancelUser() {
        //     window.location.href = 'Index';
        // }

        // function delete1() {
        //     console.log("Enter");
        //     var confirmDelete = confirm("Are you sure you want to delete this user?");

        //     if (confirmDelete) {
        //         var editIndex = getUrlParameter('index');
        //         var existingUsers = JSON.parse(localStorage.getItem('users')) || [];

        //         if (editParameter === 'true' && editIndex !== null) {
        //             // If editing, show the user data before deletion
        //             populateFormForEdit();

        //             // Delete the user at the specified index
        //             existingUsers.splice(editIndex, 1);
        //             localStorage.setItem('users', JSON.stringify(existingUsers));

        //             // Show a success message
        //             alert('User deleted successfully!');

        //             // Navigate to datadisplay.html after deletion
        //             window.location.href = 'Index';
        //         } else {
        //             alert('Cannot delete user. No user selected for deletion.');
        //         }
        //     }
        // }
        // var firstName = document.getElementById("firstName");

        // var firstNameValidation = function () {

        //     firstNameValue = firstName.value.trim().replace(/\s/g, '');
        //     console.log(firstNameValue);
        //     validFirstName = /^[A-Za-z]+$/;
        //     firstNameErr = document.getElementById('first-name-err');

        //     if (firstNameValue === "") {
        //         firstNameErr.innerHTML = "This field is required.";
        //     }
        //     else if (firstNameValue.length < 3 || firstNameValue.length > 18) {
        //         firstNameErr.innerHTML = "First Name must be between 3 and 18 characters.";
        //     } else {
        //         firstNameErr.innerHTML = "";
        //         return true;
        //     }
        // };
        // firstName.oninput = function () {

        //     firstNameValidation();
        // }
        // var lastName = document.getElementById("lastName");

        // var lastNameValidation = function () {
        //     lastNameValue = lastName.value.trim().replace(/\s/g, '');
        //     console.log(lastNameValue);
        //     validLastName = /^[A-Za-z]+$/;
        //     lastNameErr = document.getElementById('last-name-err');
        //     if (lastNameValue === "") {
        //         lastNameErr.innerHTML = "This field is required.";
        //     }

        //     else if (lastNameValue.length < 2 || lastNameValue.length > 18) {
        //         lastNameErr.innerHTML = "Last Name must be between 2 and 18 characters.";
        //     } else {
        //         lastNameErr.innerHTML = "";
        //         return true;
        //     }
        // };


        // lastName.oninput = function () {
        //     lastNameValidation();
        // }



    </script>
    
